
DROP TABLE IF EXISTS `mailtemplate`;

CREATE TABLE `mailtemplate` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `name` varchar(250) NOT NULL,
  `value` longtext DEFAULT NULL,
  `provider` varchar(250) DEFAULT NULL,
  `changeTimestamp` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  PRIMARY KEY (`id`),
  KEY `index_name_and_provider` (`name`,`provider`) USING BTREE,
  KEY `index_name` (`name`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;


INSERT INTO `mailtemplate` (`id`, `name`, `value`, `provider`, `changeTimestamp`) VALUES
(1, 'icsappointment_delete.twig', '{% block content %}\r\nBEGIN:VCALENDAR\r\nX-LOTUS-CHARSET:UTF-8\r\nCALSCALE:GREGORIAN\r\nVERSION:2.0\r\nPRODID:ZMS-München\r\nMETHOD:REQUEST\r\nX-WR-TIMEZONE:Europe/Berlin\r\nBEGIN:VTIMEZONE\r\nTZID:Europe/Berlin\r\nX-LIC-LOCATION:Europe/Berlin\r\nBEGIN:DAYLIGHT\r\nTZOFFSETFROM:+0100\r\nTZOFFSETTO:+0200\r\nTZNAME:CEST\r\nDTSTART:19700329T020000\r\nRRULE:FREQ=YEARLY;INTERVAL=1;BYDAY=-1SU;BYMONTH=3\r\nEND:DAYLIGHT\r\nBEGIN:STANDARD\r\nTZOFFSETFROM:+0200\r\nTZOFFSETTO:+0100\r\nTZNAME:CET\r\nDTSTART:19701025T030000\r\nRRULE:FREQ=YEARLY;INTERVAL=1;BYDAY=-1SU;BYMONTH=10\r\nEND:STANDARD\r\nEND:VTIMEZONE\r\nBEGIN:VEVENT\r\nUID:{{ startTime|date(\"Ymd\") }}-{{ process.id }}\r\nORGANIZER;CN=\"{{ process.scope.provider.displayName }}\":MAILTO:{{ process.scope.preferences.client.emailFrom }}\r\nSEQUENCE:0\r\nLOCATION:{{ process.scope.provider.displayName }} {{ process.scope.provider.contact.street }} {{ process.scope.provider.contact.streetNumber }}\\, {{ process.scope.provider.contact.postalCode }} {{ process.scope.provider.contact.city }}\r\nGEO:48.85299;2.36885\r\nSUMMARY:{{ \"Terminabsage:\"|trans }} {{ process.id }}\r\nDESCRIPTION:{{ message }}\r\nCLASS:PUBLIC\r\nDTSTART;TZID=Europe/Berlin:{{ startTime|date(\"Ymd\") }}T{{ startTime|date(\"His\") }}\r\nDTEND;TZID=Europe/Berlin:{{ endTime|date(\"Ymd\") }}T{{ endTime|date(\"His\") }}\r\nDTSTAMP:{{ timestamp|date(\"Ymd\") }}T{{ timestamp|date(\"His\") }}\r\nSTATUS:CANCELLED\r\nEND:VEVENT\r\nEND:VCALENDAR\r\n{% endblock %}\r\n', '', '2024-05-23 10:45:16'),
(2, 'icsappointment.twig', '{% block content %}\r\nBEGIN:VCALENDAR\r\nX-LOTUS-CHARSET:UTF-8\r\nCALSCALE:GREGORIAN\r\nVERSION:2.0\r\nPRODID:ZMS-München\r\nMETHOD:REQUEST\r\nX-WR-TIMEZONE:Europe/Berlin\r\nBEGIN:VTIMEZONE\r\nTZID:Europe/Berlin\r\nX-LIC-LOCATION:Europe/Berlin\r\nBEGIN:DAYLIGHT\r\nTZOFFSETFROM:+0100\r\nTZOFFSETTO:+0200\r\nTZNAME:CEST\r\nDTSTART:19700329T020000\r\nRRULE:FREQ=YEARLY;INTERVAL=1;BYDAY=-1SU;BYMONTH=3\r\nEND:DAYLIGHT\r\nBEGIN:STANDARD\r\nTZOFFSETFROM:+0200\r\nTZOFFSETTO:+0100\r\nTZNAME:CET\r\nDTSTART:19701025T030000\r\nRRULE:FREQ=YEARLY;INTERVAL=1;BYDAY=-1SU;BYMONTH=10\r\nEND:STANDARD\r\nEND:VTIMEZONE\r\nBEGIN:VEVENT\r\nUID:{{ startTime|date(\"Ymd\") }}-{{ process.id }}\r\nORGANIZER;CN=\"{{ process.scope.provider.displayName }}\":MAILTO:{{ process.scope.preferences.client.emailFrom }}\r\nSEQUENCE:0\r\nLOCATION:{{ process.scope.provider.displayName }} {{ process.scope.provider.contact.street }} {{ process.scope.provider.contact.streetNumber }}\\, {{ process.scope.provider.contact.postalCode }} {{ process.scope.provider.contact.city }}\r\nGEO:48.85299;2.36885\r\nSUMMARY:{{ \"München-Termin:\"|trans }} {{ process.id }}\r\nDESCRIPTION:{{ message }}\r\nCLASS:PUBLIC\r\nDTSTART;TZID=Europe/Berlin:{{ startTime|date(\"Ymd\") }}T{{ startTime|date(\"His\") }}\r\nDTEND;TZID=Europe/Berlin:{{ endTime|date(\"Ymd\") }}T{{ endTime|date(\"His\") }}\r\nDTSTAMP:{{ timestamp|date(\"Ymd\") }}T{{ timestamp|date(\"His\") }}\r\nBEGIN:VALARM\r\nACTION:DISPLAY\r\nDESCRIPTION:{{ \"München-Termin:\"|trans }} {{ process.id }}\r\nTRIGGER:-P1D\r\nEND:VALARM\r\nSTATUS:CONFIRMED\r\nEND:VEVENT\r\nEND:VCALENDAR\r\n{% endblock %}\r\n', '', '2024-05-23 10:45:16'),
(3, 'mail_admin_delete.twig', '{% block german %}\r\n{% if process.queue.withAppointment %}\r\nAbgesagt wurde der Termin von {{ process.clients|first.familyName }}\r\nam {{ process.appointments|first.date|format_date(pattern=\"EE dd. MMMM y\") }} um {{ process.appointments|first.date|date(\"H:i\") }} Uhr\r\n{% else %}\r\nEinem Spontankunden mit der Wartenummer {{ process.queue.number }} wurde am {{ now|format_date(pattern=\"EE dd. MMMM y\") }} abgesagt\r\n{% endif %} für den Standort {{ process.scope.contact.name }}{% if process.scope.shortName %} {{ process.scope.shortName }}{% endif %}, {{ process.scope.contact.street }}{% if process.scope.shortName %} {{ process.scope.contact.streetNumber }}{% endif %}.\r\n<br /><br />\r\nDie Vorgangsnummer {{ process.id }} ist nun wieder freigegeben.\r\n<br />\r\nDie Terminabsage wurde initiiert via \"{{ initiator }}\".\r\n<br /><br />\r\nDies ist ein Service Ihres ZMS.\r\n{% endblock %}\r\n', '', '2024-05-23 10:45:16'),
(4, 'mail_admin_update.twig', '{% block german %}\r\n{% if process.queue.withAppointment %}\r\nGeändert wurde der Termin von {{ process.clients|first.familyName }} (Vorgangsnummer: {{ process.id }})\r\nam {{ process.appointments|first.date|format_date(pattern=\"EE dd. MMMM y\") }} um {{ process.appointments|first.date|date(\"H:i\") }} Uhr\r\n{% else %}\r\nEinem Spontankunden mit der Wartenummer {{ process.queue.number }} wurde am {{ now|format_date(pattern=\"EE dd. MMMM y\") }} der Termin geändert\r\n{% endif %} für den Standort {{ process.scope.contact.name }}{% if process.scope.shortName %} {{ process.scope.shortName }}{% endif %}, {{ process.scope.contact.street }}{% if process.scope.shortName %} {{ process.scope.contact.streetNumber }}{% endif %}.\r\n<br /><br />\r\nDie Terminänderung wurde initiiert via \"{{ initiator }}\".\r\n<br /><br />\r\nDies ist ein Service Ihres ZMS.\r\n{% endblock %}\r\n', '', '2024-05-23 10:45:16'),
(5, 'mail_confirmation.twig', '{% use \"snippets.twig\" %}\r\n{% block german %}\r\n    <div style=\"color: #000000; background: #ffffff;\">\r\n        {{ block(\"autogenerated_top_german\") }}\r\n        {{ block(\"salutation_german_neutral\") }}\r\n        wir bestätigen Ihren Termin im <strong>{{ process.scope.provider.displayName }}</strong>.\r\n        <br><br>\r\n        {#{{ process.scope.hint }}\r\n        {{ process.scope.shortName }} Die Variablen können für die Behördenspezifishe Texte verwendent verden  #} \r\n        {#\r\n         ~ \", \" ~ process.scope.provider.contact.street ~ \" \"  ~ process.scope.provider.contact.streetNumber ~\", \" ~ process.scope.provider.contact.postalCode ~ \" \" ~ process.scope.provider.contact.city }}<br />\r\n        {% if process.scope.hint %}\r\n        ({{ process.scope.hint }})<br />\r\n        {% endif %}<br />\r\n        #}\r\n        Datum:<strong> {{ (date|default(getNow))|format_date(locale=\"de\", pattern=\"EEEE, dd. MMMM y\") }} </strong><br>\r\n        Uhrzeit: <strong>{{ (date|default(getNow))|date(\"H:i\") }} {% trans %}Uhr{% endtrans %}</strong>.<br />\r\n        <br>\r\n        <b>Ihre Terminnummer und weitere Informationen erhalten Sie 24 Stunden vor Ihrem Termin.</b>\r\n        <br><br>\r\n        {#Ihre Vorgangsnummer ist die <strong>\"{{ process.id }}\"</strong><br />\r\n        <br />#}\r\n        \r\n        {#{% if config.appointments.sms.telephone %}\r\n            Oder schicken Sie eine SMS mit dem Inhalt \"{{ config.appointments.sms.textCancel }}\\{{ process.id }}\" an die Rufnummer {{ config.appointments.sms.telephone }}.\r\n            \"Hierbei ist die Groß- und Kleinschreibung von \"{{ config.appointments.sms.textCancel }}\" nicht wichtig. Bei Absage per SMS erhalten Sie zu Ihrer Sicherheit eine Bestätigungs-SMS Ihrer Absage.<br />\r\n            <br />\r\n        {% endif %}\r\n        #}\r\n        {#{% if process.scope.provider.source == \"dldb\" and process.scope.provider.data.payment %}\r\n            Zahlungshinweis: {{ process.scope.provider.data.payment }}<br /><br />\r\n        {% endif %}#}\r\n        {% if process.requests|length > 1 %}\r\n            {% set requestalias = \"Dienstleistungen sind\" %}\r\n        {% else %}\r\n            {% set requestalias = \"Dienstleistung ist\" %}\r\n        {% endif %}\r\n        {% if process.requests|length == 0 %}\r\n            Sie haben keine Dienstleistungen ausgewählt.\r\n        {% else %}\r\n            Folgende {{ requestalias }} für diesen Termin gebucht:\r\n            <br/><br />\r\n            {% for requestGroup in requestGroups %}\r\n                <strong><a href=\"http://www.muenchen.de/dienstleistungsfinder/muenchen/{{ requestGroup[\'request\'].id }}/\">{{ requestGroup[\'request\'].name }} {#am Standort {{ process.scope.provider.displayName }}#}</a></strong><br/>\r\n                \r\n                Anzahl: {{ requestGroup[\'count\'] }}\r\n                \r\n                {% if requestGroups|length > 1 and not loop.last %}\r\n                    <br /><br />\r\n                    ----------------------\r\n                    <br /><br />\r\n                {% endif %}\r\n            {% endfor %}\r\n        {% endif %}\r\n        <br><br>\r\n        Bitte informieren Sie sich vorab über oben genannte/n Link/s, welche Unterlagen Sie benötigen. \r\n        <br> <br>\r\n        Hinweis:<br>\r\n        Ein Einlass ins Gebäude ist <strong>frühestens 10 Minuten </strong> vor Ihrem Termin möglich. Bitte erscheinen Sie rechtzeitig zu Ihrem Termin. \r\n        <br><br>\r\n        Falls Sie diesen Termin nicht benötigen oder wahrnehmen können, stornieren Sie bitte <b>umgehend</b> Ihren Termin und reservieren einen neuen Termin.\r\n        <a href=\"{{ config.appointments.urlAppointments }}#/appointment/{{ appointmentLink }}\">Termin ändern/stornieren</a><br />\r\n        <br /><br />\r\n\r\n        {{ block(\"sendoff_german\") }}\r\n    </div>\r\n    <script type=\"application/ld+json\">\r\n{\r\n  \"@context\": \"http://schema.org\",\r\n  \"@type\": \"EventReservation\",\r\n  \"reservationNumber\": \"{{ process.id }}\",\r\n  \"reservationStatus\": \"http://schema.org/Confirmed\",\r\n  \"modifyReservationUrl\": \"{{ config.appointments.urlChange }}\",\r\n  \"modifiedTime\": \"{{ process.createTimestamp|date(\'c\') }}\",\r\n  \"underName\": {\r\n    \"@type\": \"Person\",\r\n    \"name\": \"{{ client.familyName }}\"\r\n  },\r\n  \"reservationFor\": {\r\n    \"@type\": \"Event\",\r\n    \"name\": \"{% for request in process.requests %}{{ request.name }}{% if not loop.last %},{% endif %} {% endfor %}\",\r\n    \"startDate\": \"{{ date|date(\'c\') }}\",\r\n    \"location\": {\r\n      \"@type\": \"Place\",\r\n      \"name\": \"{{ process.scope.provider.displayName }}\",\r\n      \"url\": \"{{process.scope.provider.link}}\",\r\n      \"geo\": {\r\n        \"@type\": \"GeoCoordinates\",\r\n        \"latitude\": \"{{process.scope.provider.contact.lat}}\",\r\n        \"longitude\": \"{{process.scope.provider.contact.lon}}\"\r\n      },\r\n      \"address\": {\r\n        \"@type\": \"PostalAddress\",\r\n        \"streetAddress\": \"{{process.scope.provider.contact.street ~ \" \"  ~ process.scope.provider.contact.streetNumber}}\",\r\n        \"addressLocality\": \"{{process.scope.provider.contact.city}}\",\r\n        \"addressRegion\": \"{{process.scope.provider.contact.city}}\",\r\n        \"postalCode\": \"{{process.scope.provider.contact.postalCode}}\",\r\n        \"addressCountry\": \"DE\"\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n{% endblock %}\r\n', '', '2024-05-23 10:45:16'),
(6, 'mail_delete.twig', '{% use \"snippets.twig\" %}\r\n{% block german %}\r\n<div style=\"color: #000000; background: #ffffff;\">\r\n{{ block(\"autogenerated_top_german\") }}\r\n{{ block(\"salutation_german_neutral\") }}\r\nIhr Termin am <strong>{{ (date|default(getNow))|format_date(locale=\"de\", pattern=\"EEEE, dd. MMMM y\") }} </strong> {% trans %}um{% endtrans %} {{ (date|default(getNow))|date(\"H:i\") }} {% trans %}Uhr{% endtrans %}  wurde gelöscht.<br />\r\n<br />\r\n{{ block(\"sendoff_german\") }}\r\n</div>\r\n<script type=\"application/ld+json\">\r\n{\r\n  \"@context\": \"http://schema.org\",\r\n  \"@type\": \"EventReservation\",\r\n  \"reservationNumber\": \"{{ process.id }}\",\r\n  \"reservationStatus\": \"http://schema.org/Cancelled\",\r\n  \"modifyReservationUrl\": \"{{ config.appointments.urlChange }}\",\r\n  \"underName\": {\r\n    \"@type\": \"Person\",\r\n    \"name\": \"{{ client.familyName }}\"\r\n  },\r\n  \"reservationFor\": {\r\n    \"@type\": \"Event\",\r\n    \"name\": \"{% for request in process.requests %}{{ request.name }}{% if not loop.last %},{% endif %} {% endfor %}\",\r\n    \"startDate\": \"{{ date|date(\'c\') }}\",\r\n    \"location\": {\r\n      \"@type\": \"Place\",\r\n      \"name\": \"{{ process.scope.provider.displayName }}\",\r\n      \"geo\": {\r\n        \"@type\": \"GeoCoordinates\",\r\n        \"latitude\": \"{{process.scope.provider.contact.lat}}\",\r\n        \"longitude\": \"{{process.scope.provider.contact.lon}}\"\r\n      },\r\n      \"address\": {\r\n        \"@type\": \"PostalAddress\",\r\n        \"streetAddress\": \"{{process.scope.provider.contact.street ~ \" \"  ~ process.scope.provider.contact.streetNumber}}\",\r\n        \"addressLocality\": \"{{process.scope.provider.contact.city}}\",\r\n        \"addressRegion\": \"{{process.scope.provider.contact.city}}\",\r\n        \"postalCode\": \"{{process.scope.provider.contact.postalCode}}\",\r\n        \"addressCountry\": \"DE\"\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n{% endblock %}\r\n', '', '2024-05-23 10:45:16'),
(7, 'mail_pickup.twig', '{% use \"snippets.twig\" %}\r\n{% block german %}\r\n    {{ block(\"autogenerated_top_german\") }}\r\n    {{ block(\"salutation_german\") }}\r\n    {% for request in process.requests %}\r\n    Ihr Dokument {% if request.name %}({{ request.name }}){% endif %} ist fertig und liegt zur Abholung bereit.<br />\r\n    {% endfor %}\r\n    <br />\r\n    Die Adresse lautet: {{ process.scope.provider.displayName ~ \" \" ~ process.scope.provider.contact.street ~ \" \"  ~ process.scope.provider.contact.streetNumber ~\", \" ~ process.scope.provider.contact.postalCode ~ \" \" ~ process.scope.provider.contact.city }}.\r\n    <br /><br />\r\n    {{ block(\"sendoff_german\") }}\r\n{% endblock %}\r\n', '', '2024-05-23 10:45:16'),
(8, 'mail_preconfirmed.twig', '{% use \"snippets.twig\" %}\r\n{% block german %}\r\n<div style=\"color: #000000; background: #ffffff;\">\r\n{{ block(\"autogenerated_top_german\") }}\r\n{{ block(\"salutation_german_neutral\") }}\r\n{% set confirmLink = config.appointments.urlAppointments ~ \'#/appointment/confirm/\' ~ appointmentLink  %}\r\nvielen Dank für die Terminanfrage.<br /><br />\r\nKlicken Sie bitte auf den unten stehenden Link, um den Termin am {{ (date|default(getNow))|format_date(locale=\"de\", pattern=\"EEEE, dd. MMMM y\") }}{% if not isQueued %} um {{ (date|default(getNow))|date(\"H:i\") }} Uhr{% endif %} verbindlich zu reservieren.<br /><br />\r\n<strong><a href=\"{{ confirmLink }}\" target=\"_blank\">Termin bestätigen</a></strong>  <br /><br />\r\n<strong>Bitte beachten Sie, dass Ihre Terminanfrage ohne eine Bestätigung nach Ablauf von einer Stunde gelöscht wird.</strong><br /><br />\r\nNach Aktivierung des Termins erhalten Sie eine Bestätigung mit der Terminnummer und weiteren Einzelheiten, die Sie für Ihre Vorsprache benötigen.<br /><br />\r\n{{ block(\"sendoff_german\") }}\r\n</div>\r\n<script type=\"application/ld+json\">\r\n{\r\n  \"@context\": \"http://schema.org\",\r\n  \"@type\": \"EventReservation\",\r\n  \"reservationNumber\": \"{{ process.id }}\",\r\n  \"reservationStatus\": \"http://schema.org/Confirmed\",\r\n  \"modifyReservationUrl\": \"{{ config.appointments.urlAppointments }}\",\r\n  \"modifiedTime\": \"{{ process.createTimestamp|date(\'c\') }}\",\r\n  \"underName\": {\r\n    \"@type\": \"Person\",\r\n    \"name\": \"{{ client.familyName }}\"\r\n  },\r\n  \"reservationFor\": {\r\n    \"@type\": \"Event\",\r\n    \"name\": \"{% for request in process.requests %}{{ request.name }}{% if not loop.last %},{% endif %} {% endfor %}\",\r\n    \"startDate\": \"{{ date|date(\'c\') }}\",\r\n    \"location\": {\r\n      \"@type\": \"Place\",\r\n      \"name\": \"{{ process.scope.provider.name }}\",\r\n      \"url\": \"{{process.scope.provider.link}}\",\r\n      \"geo\": {\r\n        \"@type\": \"GeoCoordinates\",\r\n        \"latitude\": \"{{process.scope.provider.contact.lat}}\",\r\n        \"longitude\": \"{{process.scope.provider.contact.lon}}\"\r\n      },\r\n      \"address\": {\r\n        \"@type\": \"PostalAddress\",\r\n        \"streetAddress\": \"{{process.scope.provider.contact.street ~ \" \"  ~ process.scope.provider.contact.streetNumber}}\",\r\n        \"addressLocality\": \"{{process.scope.provider.contact.city}}\",\r\n        \"addressRegion\": \"{{process.scope.provider.contact.city}}\",\r\n        \"postalCode\": \"{{process.scope.provider.contact.postalCode}}\",\r\n        \"addressCountry\": \"DE\"\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n{% endblock %}\r\n', '', '2024-05-23 10:45:16'),
(9, 'mail_queued.twig', '{% use \"snippets.twig\" %}\r\n{% block german %}\r\n<div style=\"color: #000000; background: #ffffff;\">\r\n{{ block(\"autogenerated_top_german\") }}\r\n{{ block(\"salutation_german\") }}\r\nhiermit bestätigen wir Ihre Wartenummer für den \r\n{{ (date|default(getNow))|format_date(locale=\"de\", pattern=\"EEEE, dd. MMMM y\") }}\r\n<br /><br />\r\n<strong>Ort:</strong> {{ process.scope.provider.displayName ~ \" \" ~ process.scope.provider.contact.street ~ \" \"  ~ process.scope.provider.contact.streetNumber ~\", \" ~ process.scope.provider.contact.postalCode ~ \" \" ~ process.scope.provider.contact.city }}<br />\r\n{% if process.scope.hint %}\r\n({{ process.scope.hint }})<br />\r\n{% endif %}<br />\r\nIhre Wartenummer ist die <strong>\"{{ process.queue.number }}\"</strong><br /><br />\r\n{% if process.scope.provider.source == \"dldb\" and process.scope.provider.data.payment %}\r\nZahlungshinweis: {{ process.scope.provider.data.payment }}<br /><br />\r\n{% endif %}\r\n{% if process.requests|length > 1 %}\r\n{% set requestalias = \"Dienstleistungen\" %}\r\n{% else %}\r\n{% set requestalias = \"Dienstleistung\" %}\r\n{% endif %}\r\n{% if process.requests|length == 0 %}\r\nSie haben keine Dienstleistungen ausgewählt.\r\n{% else %}\r\nSie haben folgende {{ requestalias }} ausgewählt:\r\n<br/><br />\r\n    {% for request in process.requests %}\r\n    <strong><a href=\"https://service.berlin.de/dienstleistung/{{ request.id }}/standort/{{ process.scope.provider.id }}/\">{{ request.name }} am Standort {{ process.scope.provider.displayName }}</a></strong><br/>\r\n    {% if request.source == \"dldb\" and request.data %}\r\n    <div style=\"border-left: 1em solid #ffffff; background: #ffffff;\">\r\n    {% include \"@zmsentities/detail/service_detail_prerequisites.twig\" with {\"service\":request.data, \"headerlevel\":\"h4\"} %}\r\n\r\n    {% include \"@zmsentities/detail/service_detail_requirements.twig\" with {\"service\":request.data, \"headerlevel\":\"h4\"} %}\r\n\r\n    {% include \"@zmsentities/detail/service_detail_fees.twig\" with {\"service\":request.data, \"headerlevel\":\"h4\"} %}\r\n    </div>\r\n    {% endif %}\r\n    {% if process.requests|length > 1 and not loop.last %}\r\n    <br /><br />\r\n    ----------------------\r\n    <br /><br />\r\n    {% endif %}\r\n    {% endfor %}\r\n{% endif %}\r\n<br /><br /><br />\r\n{{ block(\"sendoff_german\") }}\r\n</div>\r\n{% endblock %}\r\n', '', '2024-05-23 10:45:16'),
(10, 'mail_reminder.twig', '{% use \"snippets.twig\" %}\r\n{% block german %}\r\n<div style=\"color: #000000; background: #ffffff;\">\r\n{{ block(\"autogenerated_top_german\") }}\r\n{{ block(\"salutation_german_neutral\") }}\r\nwir erinnern Sie an Ihren Termin  <strong>am {{ (date|default(getNow))|format_date(locale=\"de\", pattern=\"EEEE, dd. MMMM y\") }} {% trans %}um{% endtrans %} {{ (date|default(getNow))|date(\"H:i\") }} {% trans %}Uhr{% endtrans %}</strong>. <br>\r\nTerminnummer: <strong>{{ process.id }}</strong><br />\r\n{% if process.scope.hint %}\r\n<strong>Wartezone: {{ process.scope.hint }} </strong><br />\r\n{% endif %}<br />\r\nBitte gehen Sie rechtzeitig zur <strong>\"{{ process.scope.provider.contact.street ~ \" \"  ~ process.scope.provider.contact.streetNumber }}\"</strong><br />\r\n<br>\r\nDer Einlass ins Gebäude ist <b>frühestens 10 Minuten</b> vor Ihrem Termin möglich. Bitte erscheinen Sie rechtzeitig zu Ihrem Termin und zeigen diese Terminerinnerung beim Einlass vor. \r\n<br /><br />\r\nIhre Terminnummer wird im oben genannten Bereich auf dem Bildschirm bei Aufruf angezeigt. \r\n<br /><br />\r\n {% if process.requests|length > 1 %}\r\n            {% set requestalias = \"Dienstleistungen sind\" %}\r\n        {% else %}\r\n            {% set requestalias = \"Dienstleistung ist\" %}\r\n        {% endif %}\r\n        {% if process.requests|length == 0 %}\r\n            Sie haben keine Dienstleistungen ausgewählt.\r\n        {% else %}\r\n            Folgende {{ requestalias }} für diesen Termin gebucht:\r\n            <br/><br />\r\n            {% for requestGroup in requestGroups %}\r\n                <strong><a href=\"http://www.muenchen.de/dienstleistungsfinder/muenchen/{{ requestGroup[\'request\'].id }}/\">{{ requestGroup[\'request\'].name }} {#am Standort {{ process.scope.provider.displayName }}#}</a></strong><br/>\r\n                \r\n                Anzahl: {{ requestGroup[\'count\'] }}\r\n                \r\n                {% if requestGroups|length > 1 and not loop.last %}\r\n                    <br /><br />\r\n                    ----------------------\r\n                    <br /><br />\r\n                {% endif %}\r\n            {% endfor %}\r\n        {% endif %}\r\n        <br><br>\r\n        Bitte vergewissern Sie sich über oben genannte/n Link/s, welche Unterlagen Sie benötigen und halten Sie diese für Ihren Termin bereit. \r\n        <br><br>\r\n        Hinweise: \r\n        <br><br>\r\n        Bei erhöhtem Kundenaufkommen können wir leider nicht ausschließen, dass Sie trotz Termins mit einer geringen Wartezeit rechnen müssen. Wir bitten Sie hierfür um Verständnis.\r\n        <br><br>\r\n        Falls Sie diesen Termin nicht benötigen oder wahrnehmen können, stornieren Sie bitte <b>umgehend</b> Ihren Termin und reservieren einen neuen Termin.\r\n        <a href=\"{{ config.appointments.urlAppointments }}#/appointment/{{ appointmentLink }}\">Termin ändern/stornieren</a><br />\r\n        <br /><br />\r\n{{ block(\"sendoff_german\") }}\r\n</div>\r\n<script type=\"application/ld+json\">\r\n{\r\n  \"@context\": \"http://schema.org\",\r\n  \"@type\": \"EventReservation\",\r\n  \"reservationNumber\": \"{{ process.id }}\",\r\n  \"reservationStatus\": \"http://schema.org/Confirmed\",\r\n  \"modifyReservationUrl\": \"{{ config.appointments.urlChange }}\",\r\n  \"modifiedTime\": \"{{ process.createTimestamp|date(\'c\') }}\",\r\n  \"underName\": {\r\n    \"@type\": \"Person\",\r\n    \"name\": \"{{ client.familyName }}\"\r\n  },\r\n  \"reservationFor\": {\r\n    \"@type\": \"Event\",\r\n    \"name\": \"{% for request in process.requests %}{{ request.name }}{% if not loop.last %},{% endif %} {% endfor %}\",\r\n    \"startDate\": \"{{ date|date(\'c\') }}\",\r\n    \"location\": {\r\n      \"@type\": \"Place\",\r\n      \"name\": \"{{ process.scope.provider.displayName }}\",\r\n      \"url\": \"{{process.scope.provider.link}}\",\r\n      \"geo\": {\r\n        \"@type\": \"GeoCoordinates\",\r\n        \"latitude\": \"{{process.scope.provider.contact.lat}}\",\r\n        \"longitude\": \"{{process.scope.provider.contact.lon}}\"\r\n      },\r\n      \"address\": {\r\n        \"@type\": \"PostalAddress\",\r\n        \"streetAddress\": \"{{process.scope.provider.contact.street ~ \" \"  ~ process.scope.provider.contact.streetNumber}}\",\r\n        \"addressLocality\": \"{{process.scope.provider.contact.city}}\",\r\n        \"addressRegion\": \"{{process.scope.provider.contact.city}}\",\r\n        \"postalCode\": \"{{process.scope.provider.contact.postalCode}}\",\r\n        \"addressCountry\": \"DE\"\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n{% endblock %}\r\n', '', '2024-05-23 10:45:16'),
(11, 'mail_scopeadmin_processlist.twig', '{% block content %}\r\n<table cellpadding=\"0\" cellspacing=\"0\" width=\"1000\">\r\n    <tr>\r\n        <td valign=\"top\">\r\n            <h1>{{ scope.provider.displayName }}</h1>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <td valign=\"top\" style=\"padding:2px 0px;\">\r\n            Standortanschrift: {{ scope.contact.street }} {{ scope.contact.streetNumber }}\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <td valign=\"top\" style=\"padding:2px 0px;\">\r\n            Standortbeschreibung: {{ scope.contact.name|default(\'-\') }}\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <td valign=\"top\" style=\"padding:2px 0px;\">\r\n            Standortk&uuml;rzel: {{ scope.contact.shortName|default(\'-\') }}\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <td valign=\"top\" style=\"padding:2px 0px;\">\r\n            Email Standortadmin: {{ scope.contact.email }}\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <td>&nbsp;</td>\r\n    </tr>\r\n\r\n    <tr>\r\n        <td>\r\n            <strong>Termine am {{ dateTime|date(\"Y-m-d\") }} ({{ processList|length }} gesamt)</strong>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <td>&nbsp;</td>\r\n    </tr>\r\n    <tr>\r\n        <td>\r\n            <table>\r\n                <tr>\r\n                    <td bgcolor=\"#dedede\" style=\"padding:3px 10px;\">Uhrzeit</td>\r\n                    <td bgcolor=\"#dedede\" style=\"padding:3px 10px;\">Vorgangsnummer</td>\r\n                    <td bgcolor=\"#dedede\" style=\"padding:3px 10px;\">Name des Kunden</td>\r\n                    <td bgcolor=\"#dedede\" style=\"padding:3px 10px;\">Dienstleistung</td>\r\n                </tr>\r\n                {% for key, process in processList %}\r\n                {% set style = \"padding:3px 10px; background-color:#efefef; border-bottom:1px solid #e2e2e2;\" %}\r\n                {% if loop.index0 is odd %}\r\n                {% set style = \"padding:3px 10px;\" %}\r\n                {% endif %}\r\n                <tr>\r\n                    <td width=\"70\" valign=\"top\" style=\"{{ style }}\">\r\n                        {{ process.appointments|first.date|date(\"H:i\") }} {% if process.appointments|first.slotCount > 1 %}<small>({{ process.appointments|first.slotCount }})</small>{% endif %}\r\n                    </td>\r\n                    <td width=\"120\" valign=\"top\" style=\"{{ style }}\">\r\n                        {{ process.id }}\r\n                    </td>\r\n                    <td valign=\"top\" width=\"280\" style=\"{{ style }}\">\r\n                        {{ process.clients|first.familyName }}\r\n                    </td>\r\n                    <td valign=\"top\" width=\"430\" style=\"{{ style }}\">\r\n                        {{ process.requests|first.name }}\r\n                    </td>\r\n                </tr>\r\n                {% endfor %}\r\n            </table>\r\n        </td>\r\n    </tr>\r\n</table>\r\n{% endblock %}\r\n', '', '2024-05-23 10:45:16'),
(12, 'notification_appointment.twig', '{% block german %}\r\nIhr Termin: Vorgangsnr. {{ process.id }} am {{ process.appointments.0.date|date(\'d.m.y\') }} um {{ process.appointments.0.date|date(\'H:i\') }} Uhr, {{ process.scope.provider.contact.name }}, {{ process.scope.provider.contact.street }} {{ process.scope.provider.contact.streetNumber }}, {{ process.scope.provider.contact.postalCode }}  {{ process.scope.provider.contact.city }} {% if process.scope.hint %}({{ process.scope.hint }}){% endif %}\r\n{% endblock %}\r\n', '', '2024-05-23 10:45:16'),
(13, 'notification_confirmation.twig', '{% block german %}\r\n{% if process.scope.preferences.notifications.confirmationContent %}\r\n{{ process.scope.preferences.notifications.confirmationContent }} {{ process.queue.number }}\r\n{% else %}\r\n{{ config.notifications.confirmationContent }} {{ process.queue.number }}\r\n{% endif %}\r\n{% endblock %}', '', '2024-05-23 10:45:16'),
(14, 'notification_deleted.twig', '{% block german %}\r\nIhr Termin: Vorgangsnr. {{ process.id }} am {{ process.appointments.0.date|date(\'d.m.y\') }} um {{ process.appointments.0.date|date(\'H:i\') }} Uhr, wurde abgesagt.\r\n{% endblock %}\r\n', '', '2024-05-23 10:45:16'),
(15, 'notification_headsup.twig', '{% block german %}\r\n{% if process.scope.preferences.notifications.headsUpContent %}\r\n{{ process.scope.preferences.notifications.headsUpContent }} {{ process.queue.number }}\r\n{% else %}\r\n{{ config.notifications.headsUpContent }} {{ process.queue.number }}\r\n{% endif %}\r\n{% endblock %}', '', '2024-05-23 10:45:16'),
(16, 'notification_pickup.twig', '{% block german %}\r\nIhr Dokument ist fertig und liegt zur Abholung bereit, am Standort {{ process.scope.provider.contact.name }}\r\n{% endblock %}\r\n', '', '2024-05-23 10:45:16'),
(17, 'snippets.twig', '{% block autogenerated_top_german %}\r\n<div style=\"background: #eeeeee; border: 1px solid #aaaaaa; padding:10px;\">\r\nAchtung! Dies ist eine automatisch erstellte E-Mail. Bitte antworten Sie nicht auf diese Mail, sie kann nicht bearbeitet werden.\r\n</div><br />\r\n{% endblock %}\r\n\r\n{% block salutation_german %}\r\nSehr geehrte*r {{ client.familyName }},<br /><br />\r\n{% endblock %}\r\n\r\n{% block salutation_german_neutral %}\r\nGuten Tag {{ client.familyName }},<br /><br />\r\n{% endblock %}\r\n\r\n{% block sendoff_german %}\r\nMit freundlichen Grüßen<br />\r\nIhr {{ process.scope.provider.displayName }} \r\n<br /><br />\r\n{# <a href=\"{{ config.appointments.urlAppointments }}\">{{ config.appointments.urlAppointments }}</a> #}\r\n{% endblock %}', '', '2024-05-23 10:45:16'),
(18, 'subjects.twig', '{% block german %}\r\n    {% if status == \'confirmed\' or status == \'appointment\' %}\r\n    Terminbestätigung\r\n    {% elseif status == \'preconfirmed\' %}\r\n    Aktivierungslink für Ihren Termin\r\n    {% elseif status == \'reminder\' %}\r\n    Terminerinnerung\r\n    {% elseif (status == \'deleted\' or status == \'blocked\') and not initiator %}\r\n    Terminabsage\r\n    {% elseif (status == \'deleted\' or status == \'blocked\') and initiator %}\r\n    Information Terminabsage\r\n    {% elseif status == \'updated\' and initiator %}\r\n    Information Terminänderung\r\n    {% elseif status == \'queued\' %}\r\n    Wartenummerbestaetigung\r\n    {% elseif status == \'pickup\' %}\r\n    Ihr Dokument {% if process.requests|first.name %}({{ process.requests|first.name }}) {% endif %}ist fertig und liegt zur Abholung bereit.\r\n    {% elseif status == \'survey\' and process.clients|first.surveyAccepted %}\r\n    Kundenbefragung des Standorts {{ process.scope.contact.name }}\r\n    {% else %}\r\n    Terminerinnerung\r\n    {% endif %}\r\n{% endblock %}\r\n', '', '2024-05-23 10:45:16');

